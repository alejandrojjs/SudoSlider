(function(h,l){var f=EventBus.getInstance();h.module("exports",["ngSanitize","sudoSlider","ui.bootstrap","sudoSlider"]).controller("ImportExportController",["$scope","$timeout","sudoSlider",function(a,h,g){function n(){for(var b=g.filterAllDefaultValueOptionDefinitions(a.optionDefinitions),d={},c=0;c<b.length;c++){var e=b[c];d[e.name]="function"==e.type?e.stringValue:e.value}return d}function k(a,d){for(var c="",e=0;e<a.length;e++)c+=d+a[e],e!=a.length-1&&(c+="\n");return c}a.style="";a.optionDefinitions=
[];a.slides=[];f.register(SudoSliderUpdateOptionsEvent,function(b){a.optionDefinitions=b.newDefinitions;a.$$phase||a.$apply()},!0,window);f.register(SudoSliderSlidesUpdateEvent,function(b){a.slides=b.newSlides;a.$$phase||a.$apply()},!0,window);f.register(SliderBuilderStyleChangeEvent,function(b){a.style=b.style;a.$$phase||a.$apply()},!0,window);var m=g.globalSliderApi();a.importString="";a.doImport=function(){m.destroy();var b=JSON.parse(a.importString);g.insertValuesIntoOptionDefinitions(a.optionDefinitions,
b.options);a.slides=b.slides;a.style=b.style;f.fireEvent(new ImportEvent(a.slides,a.style,a.optionDefinitions));h(function(){m.init()},0)};a.getExportOutput=function(){return JSON.stringify({options:n(),style:a.style+" ",slides:l.map(a.slides,function(a){return{html:a.html}})})};a.getExportOptionsOutput=function(b){void 0===b&&(b="");var d=g.filterAllDefaultValueOptionDefinitions(a.optionDefinitions);if(0==d.length)return"{}";var c="",e=!0;l.each(d,function(a,d){e?e=!1:c+=",\n";c+="    "+b;if("function"==
d.type||"array"==d.type)c+='"'+d.name+'":'+d.stringValue;else{var f=d.value;"number"==d.type&&(f=Number(f));c+='"'+d.name+'":'+JSON.stringify(f)}});return"{\n"+c+"\n"+b+"}"};a.indentedStyle=function(){var b=a.style.split("\n");return k(b,"        ")};a.getPrettySlides=function(){for(var b="",d=0;d<a.slides.length;d++){var c=k(a.slides[d].html.split("\n"),"    "),b=b+("<div>\n"+c+"\n</div>");d!=a.slides.length-1&&(b+="\n")}return k(b.split("\n"),"        ")}}])})(angular,jQuery);
